generator client {
    provider = "prisma-client-js"
    binaryTargets = ["native", "linux-musl-arm64-openssl-3.0.x"]
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model DocumentChunk {
  id            String   @id @default(cuid())
  content       String   @db.Text
  contentArabic String?  @db.Text @map("content_arabic")
  embedding     Unsupported("vector(768)")?
  embeddingJson Json?    @map("embedding_json")
  source        String   // "coran", "hadith", "imam"
  reference     String   // Ex: "Sourate 2, Verset 255" ou "Hadith 42"
  grade         String?  // Pour hadiths: 'sahih', 'hasan', 'daif'
  themes        String[] @default([])
  isnad         String?  @db.Text
  metadata      Json?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt @default(now())

  @@index([source])
  @@index([grade])
  @@index([createdAt])
  @@map("document_chunks")
}

// ==================== STRUCTURE OPTIMISÃ‰E HADITHS (FUTURE) ====================

model Hadith {
  id            String   @id @default(cuid())

  hadithNumber  Int?     @map("hadith_number")
  bookNumber    Int?     @map("book_number")
  chapterNumber Int?     @map("chapter_number")

  textArabic    String   @db.Text @map("text_arabic")
  textFrench    String?  @db.Text @map("text_french")
  textEnglish   String?  @db.Text @map("text_english")

  isnad         String?  @db.Text
  narratorChain Json?    @map("narrator_chain")

  grade         String?
  gradedBy      String?  @map("graded_by")

  source        String
  bookName      String?  @map("book_name")
  chapterName   String?  @map("chapter_name")
  themes        String[] @default([])

  metadata      Json?

  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([source])
  @@index([grade])
  @@index([hadithNumber])
  @@map("hadiths")
}

// ==================== STRUCTURE CORAN (FUTURE) ====================

model QuranVerse {
  id                String   @id @default(cuid())

  surahNumber       Int      @map("surah_number")
  verseNumber       Int      @map("verse_number")
  juzNumber         Int?     @map("juz_number")
  hizbNumber        Int?     @map("hizb_number")
  pageNumber        Int?     @map("page_number")

  textArabic        String   @db.Text @map("text_arabic")
  textFrench        String?  @db.Text @map("text_french")
  textTransliteration String? @db.Text @map("text_transliteration")

  surahNameArabic   String?  @map("surah_name_arabic")
  surahNameFrench   String?  @map("surah_name_french")
  revelationType    String?  @map("revelation_type")

  themes            String[] @default([])
  relatedVerses     Json?    @map("related_verses")

  metadata          Json?

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@unique([surahNumber, verseNumber])
  @@index([surahNumber])
  @@map("quran_verses")
}
